---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
---

<Layout title="ConfiguraciÃ³n - Sistema IoT">
  <Navigation />
  
  <main class="px-4 py-6 pb-20">
    <div class="text-center mb-6">
      <div class="text-5xl mb-3">âš™ï¸</div>
      <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">
        ConfiguraciÃ³n del Sistema
      </h1>
      <p class="text-sm text-gray-600">
        Modifica los ajustes de tu dispositivo IoT
      </p>
    </div>

    <!-- Alerta de autenticaciÃ³n -->
    <div id="authWarning" class="max-w-lg mx-auto mb-6 bg-orange-50 border border-orange-200 rounded-lg p-4">
      <div class="flex items-center space-x-3">
        <span class="text-2xl">ğŸ”’</span>
        <div>
          <p class="text-sm font-medium text-orange-800 mb-1">
            Debes iniciar sesiÃ³n para modificar
          </p>
          <p class="text-xs text-orange-600">
            Puedes ver, pero no editar sin autenticarte
          </p>
        </div>
      </div>
    </div>

    <!-- Formulario de configuraciÃ³n -->
    <div class="max-w-lg mx-auto space-y-4">
      
      <!-- Intervalo de actualizaciÃ³n -->
      <div class="bg-white p-5 rounded-xl shadow-md">
        <label class="block text-sm font-semibold text-gray-700 mb-3">
          ğŸ“¡ Intervalo de ActualizaciÃ³n
        </label>
        <div class="flex items-center space-x-3">
          <input 
            type="range" 
            min="5" 
            max="60" 
            value="10" 
            id="intervalo"
            class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"
            disabled
          />
          <span class="text-lg font-bold text-gray-900 min-w-[60px]" id="intervaloValue">
            10s
          </span>
        </div>
        <p class="text-xs text-gray-500 mt-2">
          Frecuencia de envÃ­o de datos desde el sensor
        </p>
      </div>

      <!-- Umbral de temperatura -->
      <div class="bg-white p-5 rounded-xl shadow-md">
        <label class="block text-sm font-semibold text-gray-700 mb-3">
          ğŸŒ¡ï¸ Umbral de Temperatura (Â°C)
        </label>
        <input 
          type="number" 
          value="30" 
          id="umbralTemp"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-lg font-semibold text-center disabled:opacity-50 disabled:bg-gray-50"
          disabled
        />
        <p class="text-xs text-gray-500 mt-2">
          Alerta si la temperatura supera este valor
        </p>
      </div>

      <!-- Modo nocturno -->
      <div class="bg-white p-5 rounded-xl shadow-md">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <span class="text-2xl">ğŸŒ™</span>
            <div>
              <p class="font-semibold text-gray-700">Modo Nocturno</p>
              <p class="text-xs text-gray-500">Reduce frecuencia 22:00-6:00</p>
            </div>
          </div>
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" id="modoNocturno" class="sr-only peer" disabled>
            <div class="w-14 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600 peer-disabled:opacity-50 peer-disabled:cursor-not-allowed"></div>
          </label>
        </div>
      </div>

      <!-- Alertas activas -->
      <div class="bg-white p-5 rounded-xl shadow-md">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <span class="text-2xl">ğŸ””</span>
            <div>
              <p class="font-semibold text-gray-700">Alertas Activas</p>
              <p class="text-xs text-gray-500">Notificaciones en tiempo real</p>
            </div>
          </div>
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" id="alertas" class="sr-only peer" checked disabled>
            <div class="w-14 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600 peer-disabled:opacity-50 peer-disabled:cursor-not-allowed"></div>
          </label>
        </div>
      </div>

      <!-- BotÃ³n guardar -->
      <button 
        id="guardarBtn"
        class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 transition"
        disabled
      >
        ğŸ’¾ Guardar Cambios
      </button>

    </div>

    <!-- Info adicional -->
    <div class="max-w-lg mx-auto mt-6 bg-gray-50 p-4 rounded-lg">
      <p class="text-xs text-gray-600 text-center">
        â„¹ï¸ Los cambios se sincronizarÃ¡n automÃ¡ticamente con tu dispositivo IoT
      </p>
    </div>
  </main>
</Layout>

<script>
  // Actualizar valor del slider en tiempo real
  const intervalo = document.getElementById('intervalo') as HTMLInputElement;
  const intervaloValue = document.getElementById('intervaloValue');

  intervalo?.addEventListener('input', (e) => {
    const value = (e.target as HTMLInputElement).value;
    if (intervaloValue) intervaloValue.textContent = `${value}s`;
  });

  // AquÃ­ irÃ¡ la lÃ³gica de Firebase Auth para habilitar/deshabilitar campos
  console.log('PÃ¡gina de configuraciÃ³n cargada');
</script>